@page "/"
@inject IDataService DataService

@if (countries is not null)
{
    <QuickGrid Items="@countries" ResizableColumns=true>
        <TemplateColumn><img class="flag" src="flags/@(context.Code).svg" /></TemplateColumn>
        <PropertyColumn Property="@(c => c.Name)" Sortable="true" />
        <PropertyColumn Property="@(c => c.Medals.Gold)" Sortable="true" Align="Align.Right" />
        <PropertyColumn Property="@(c => c.Medals.Silver)" Sortable="true" Align="Align.Right" />
        <PropertyColumn Property="@(c => c.Medals.Bronze)" Sortable="true" Align="Align.Right" />
        <PropertyColumn Property="@(c => c.Medals.Total)" Sortable="true" Align="Align.Right" />
        <Paginator />
    </QuickGrid>
}

@code {
    IQueryable<Country> countries;

    protected override async Task OnInitializedAsync()
    {
        countries = (await DataService.GetCountriesAsync()).AsQueryable();
    }
}
